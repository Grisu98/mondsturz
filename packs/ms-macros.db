{"name":"Text zu Eigenschaft","type":"script","scope":"global","author":"w0J4MEJsQZ0ACf2u","img":"icons/svg/dice-target.svg","command":"new Promise(resolve => {\n        new Dialog({\n            title: \"Input zu Eigenschaft\",\n            content: `<textarea id=\"idat\"></textarea>`,\n            default: \"normal\",\n            buttons: {\n                normal: {\n                    icon: '<i class=\"fas fa-pen\"></i>',\n                    label: \"erstellen\",\n                    callback: html => resolve(createEig(html))\n                }\n            },\n            close: () => resolve(null)\n        }).render(true);\n    });\nasync function createEig(html){\n    const t = html.find('[id=idat]')[0].value;\n\n    const lines = t.split(\"\\n\");\n    let obj = {\n        ranks: {}\n    };\n    for (let i = 0; i < lines.length; i++) {\n        if (i === 0) {\n            obj.name = lines[i];\n        }\n        if (i === 1) {\n            obj.desc = lines[i];\n        }\n        if (lines[i].length > 2 && i > 2) {\n            let key = `rank${Object.keys(obj.ranks).length + 1}`;\n\n            let a = obj.ranks[key] = {};\n            a.text = lines[i];\n        }\n    }\n    console.log(obj)\n    let i = await Item.create({ name: obj.name, type: \"eigenschaft\", system: { ranks: obj.ranks, description: obj.desc } })\n}","flags":{"core":{"sourceId":"Macro.1B1Z6VQVB8cqKMwP"}},"_stats":{"systemId":"mondsturz","systemVersion":"1.0","coreVersion":"10.291","createdTime":1676675336481,"modifiedTime":1676819920952,"lastModifiedBy":"w0J4MEJsQZ0ACf2u"},"folder":null,"sort":0,"ownership":{"default":0,"w0J4MEJsQZ0ACf2u":3},"_id":"ByunGil8TRpR9iIQ"}
{"name":"Text zu RollTable","type":"script","scope":"global","author":"w0J4MEJsQZ0ACf2u","img":"icons/svg/dice-target.svg","command":"new Promise(resolve => {\n        new Dialog({\n            title: \"Input zu RollTable\",\n            content: `<label for=\"name\">Name:</label><input id=\"name\"/><textarea id=\"idat\"></textarea>`,\n            default: \"normal\",\n            buttons: {\n                normal: {\n                    icon: '<i class=\"fas fa-pen\"></i>',\n                    label: \"erstellen\",\n                    callback: html => resolve(createTable(html))\n                }\n            },\n            close: () => resolve(null)\n        }).render(true);\n    });\n\n    async function createTable(html) {\n        const text = html.find('[id=idat]')[0].value;\n        const tableName = html.find('[id=name]')[0].value;\n        const lines = text.split(\"\\n\");\n        let rollT = await RollTable.create({ name: tableName , formula: `1d${lines.length}` });\n\n        lines.forEach(async (element, index) => {\n            await rollT.createEmbeddedDocuments(\"TableResult\", [{ text: element, range: [index + 1, index + 1] }])\n        })\n    }","flags":{"core":{"sourceId":"Macro.wOMX5AXaymyXa3mt"}},"_stats":{"systemId":"mondsturz","systemVersion":"1.0","coreVersion":"10.291","createdTime":1676674076481,"modifiedTime":1676819909043,"lastModifiedBy":"w0J4MEJsQZ0ACf2u"},"folder":null,"sort":0,"ownership":{"default":0,"w0J4MEJsQZ0ACf2u":3},"_id":"jNsYMAUFOTuuCkHc"}
